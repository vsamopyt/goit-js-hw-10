{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst btnStart = document.querySelector(\"button\");\nconst timeValue =  document.querySelectorAll(\".value\");\nconst myInput = document.querySelector(\"#datetime-picker\");\n\nlet userSelectedDate = 0;\n\nconst options = {\n  enableTime: true,\n  altInputClass: \"calendar-block\",\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n  },\n};\n\n\nbtnStart.disabled = true;\n\n\nfunction addLeadingZero(value) {\n  value=value.toString()\n  return value.padStart(2, '0')\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n  \n\n  \nconst fp = flatpickr(myInput, {...options});  \n\nfp.config.onOpen.push(function()  {\n  btnStart.style.backgroundColor=\"#4e75ff\";\n  btnStart.style.color=\"#fff\";\n  myInput.style.border = \"none\";\n  myInput.style.outline = \"1px solid blue\";\n})\n\n\nfp.config.onClose.push(function() { \n\n  const currentUnixTime = options.defaultDate.getTime()\n  const nextUnixTime = fp.selectedDates[0].getTime()\n  const gapTime = nextUnixTime - currentUnixTime;\n\n  if (gapTime > 0) {\n      userSelectedDate = gapTime;\n      btnStart.disabled = false;\n  }\n\n  else {\n      iziToast.error({\n        title: 'Error',\n        message: \"Please choose a date in the future\",\n        position:\t'topRight',\n        backgroundColor: \"red\",\n        messageColor: \"#fff\",\n        titleColor: \"#fff\",\n        iconColor: \"#fff\",\n        theme: 'light',\n      });\n    \n      btnStart.disabled = true;\n      btnStart.style.backgroundColor=\"#cfcfcf\";\n      btnStart.style.color=\"#989898\";\n      myInput.style.border = \"none\";\n      myInput.style.outline = \"1px solid black\";\n  }\n\n } );\n\n \nbtnStart.addEventListener(\"click\", ()=>{\n\n    btnStart.style.backgroundColor=\"#cfcfcf\";\n    btnStart.style.color=\"#989898\";\n    myInput.style.border = \"none\";\n    myInput.style.outline = \"1px solid black\";\n    btnStart.disabled = true;\n    myInput.disabled  = true; \n\n    const intervaLid =  setInterval(() => {\n        const objcTime = convertMs( userSelectedDate);\n        const valuesObjectTime = Object.values(objcTime);\n        \n        timeValue.forEach((element, index) => {\n          element.textContent = addLeadingZero(valuesObjectTime[index])\n        })\n  \n        userSelectedDate = userSelectedDate-1000\n        if (userSelectedDate <=0) {\n            clearInterval(intervaLid)\n            btnStart.disabled = true;\n            myInput.disabled  = false; \n        }\n\n    }, 1000);\n\n})"],"names":["btnStart","timeValue","myInput","userSelectedDate","options","selectedDates","addLeadingZero","value","convertMs","ms","days","hours","minutes","seconds","fp","flatpickr","currentUnixTime","gapTime","iziToast","intervaLid","objcTime","valuesObjectTime","element","index"],"mappings":"+IAUA,MAAMA,EAAW,SAAS,cAAc,QAAQ,EAC1CC,EAAa,SAAS,iBAAiB,QAAQ,EAC/CC,EAAU,SAAS,cAAc,kBAAkB,EAEzD,IAAIC,EAAmB,EAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,cAAe,iBACf,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,CAC7B,CACH,EAGAL,EAAS,SAAW,GAGpB,SAASM,EAAeC,EAAO,CAC7B,OAAAA,EAAMA,EAAM,SAAU,EACfA,EAAM,SAAS,EAAG,GAAG,CAC9B,CAEA,SAASC,EAAUC,EAAI,CAQnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAIH,MAAMC,EAAKC,EAAUb,EAAS,CAAC,GAAGE,CAAO,CAAC,EAE1CU,EAAG,OAAO,OAAO,KAAK,UAAY,CAChCd,EAAS,MAAM,gBAAgB,UAC/BA,EAAS,MAAM,MAAM,OACrBE,EAAQ,MAAM,OAAS,OACvBA,EAAQ,MAAM,QAAU,gBAC1B,CAAC,EAGDY,EAAG,OAAO,QAAQ,KAAK,UAAW,CAEhC,MAAME,EAAkBZ,EAAQ,YAAY,QAAS,EAE/Ca,EADeH,EAAG,cAAc,CAAC,EAAE,QAAS,EACnBE,EAE3BC,EAAU,GACVd,EAAmBc,EACnBjB,EAAS,SAAW,KAIpBkB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OACd,WAAY,OACZ,UAAW,OACX,MAAO,OACf,CAAO,EAEDlB,EAAS,SAAW,GACpBA,EAAS,MAAM,gBAAgB,UAC/BA,EAAS,MAAM,MAAM,UACrBE,EAAQ,MAAM,OAAS,OACvBA,EAAQ,MAAM,QAAU,kBAG9B,GAGAF,EAAS,iBAAiB,QAAS,IAAI,CAEnCA,EAAS,MAAM,gBAAgB,UAC/BA,EAAS,MAAM,MAAM,UACrBE,EAAQ,MAAM,OAAS,OACvBA,EAAQ,MAAM,QAAU,kBACxBF,EAAS,SAAW,GACpBE,EAAQ,SAAY,GAEpB,MAAMiB,EAAc,YAAY,IAAM,CAClC,MAAMC,EAAWZ,EAAWL,CAAgB,EACtCkB,EAAmB,OAAO,OAAOD,CAAQ,EAE/CnB,EAAU,QAAQ,CAACqB,EAASC,IAAU,CACpCD,EAAQ,YAAchB,EAAee,EAAiBE,CAAK,CAAC,CACtE,CAAS,EAEDpB,EAAmBA,EAAiB,IAChCA,GAAmB,IACnB,cAAcgB,CAAU,EACxBnB,EAAS,SAAW,GACpBE,EAAQ,SAAY,GAG3B,EAAE,GAAI,CAEX,CAAC"}